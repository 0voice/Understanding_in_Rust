# 开始设计一个 RPC 框架吧

本系列教程将带你使用 **Rust** 从零造一个 **Thrift** 框架。

指导框架设计的一些经验很大一部分是在开发 Lust 框架的过程中探索出来的，所以本教程框架取名为 mini-lust。

由于本框架的目标只聚焦在 Thrift 上，并且想在不牺牲性能和扩展性的前提下尽可能地简单，所以实现上会和 Lust 有较大不同。

Lust 框架是一个开源的高性能 RPC 框架，支持 Thrift 和 gRPC。近期开源，敬请期待。

![img](https://github.com/mini-lust/tutorials/raw/master/asserts/images/overview.png)

## 0x00 前言

> RPC 框架设计是怎么回事呢？RPC 框架的使用相信大家都很熟悉，但是设计 RPC 框架是怎么回事呢？下面就让小编带大家一起了解吧。

RPC 框架，顾名思义，做的事情就是 Remote Procedure Call。 只要自定义 IDL 就可以使用其来约定通信方式，然后就可以轻松完成远程调用。

框架要做哪些事情？

1. IDL 解析和序列化、反序列化代码生成
2. 服务治理，如超时等
3. 在可复用的连接上收发消息并能将请求和响应配对返回给用户

## 0x01 设计目标

Mini-lust 的目标是一个**简洁**、**低耦合**且**高效**的 Thrift RPC 框架。

我们会尽可能地在关键路径上使用静态分发，虽然这可能会让泛型约束看起来有点难写。

我们也会尽可能地利用成熟的组件，如 tokio、tower 和 thrift 官方代码。

我们不会提供太多的功能，这不是一个大而全的框架（需要的话出门右转 Lust），但是我们会提供一定的可扩展性。

## 0x02 环境搭建

如果你没有 Rust 开发环境，可以按照下面的文档配置一下。 相比 Cpp 开发环境搭建，Rust 的可以说十分开箱即用了。

Clion 和 VSCode 都很方便配置。
